<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>제이쿼리 선택자와 이벤트 효과메서드를 활용한 모달윈도 띄우기 p.358</title>
  <style>
    /* 모달서식 */
    .modal{
      position:fixed;
      top: 0px;
      left: 0px;
      width:100%;
      height:100%;
      background: rgba(0,0,0,.7);
      text-align: center;
    }
    .modal img{
      width:380px;
      padding-top:60px;
    }
    .modal label{
      color: #fff;
      padding-right:10px;
    }
    .modal a{
      background-color: #fff;
      text-decoration: none;
      color:#333;
      padding: 4px 10px;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="./script/jquery.cookie.js"></script>
  <script>
    $(document).ready(function(){
      
      // 모달변수
      let modal = "<div class='modal'><img src='./img/popup.jpg' alt=''><br><input type='checkbox' id='ch'><label for='ch'>오늘하루 이 창을 열지 않음</label><a = href='#' title='' id='c_btn'>닫기</a></div>";

      // body태그의 안쪽으로 맨 뒤에 변수내용을 출력한다.
      $('body').append(modal);

      // 제이쿼리 쿠키 사용법
      // $.cookie('쿠키이름','쿠키값',{expires:만료일, path:'저장경로'});

      // 과거에 페이지를 열었을 때 체크박스를 체크했는지 유무
      
      if($.cookie('popup')=='none'){ // 현재 브라우저에서 쿠키 popup이 none이면
        $('.modal').hide(); // 모달을 숨겨 나오지 않게 한다.
      }

      // 닫기버튼을 클릭하면 사용자가 체크박스에 체크했는지 안했는지를 판단하는 함수를 호출한다.

      const cbtn = $('#c_btn');
      let ch = $('#ch') // 체크박스 변수

      cbtn.click(function(){ // 닫기 버튼을 클릭하면 아래 함수를 호출한다.
        closePop();
      });

      function closePop(){ // 체크박스 체크유무를 따지는 함수
        if(ch.is(':checked')){
          $.cookie('popup','none',{expire:1, path:'/'}); // 쿠키를 생성한다.
        }
        $('.modal').hide(); // 모달 창 숨기기
      };

    });
  </script>
</head>
<body>
  <h2>제이쿼리 선택자와 이벤트 효과 메서드를 활용한 모달윈도 띄우기 p.358</h2>
  <h3>모달윈도 = 팝업레이어</h3>
  <p>모달윈도(Modal Window)는 사용자 인터페이스(UI)디자인 개념에서 자식 윈도에서 부모 윈도우로 돌아가기 전에 사용자의 상호동작을 요구하는 창을 말한다.</p>
  <p>부모창을 배경으로 어둡게 하고 자식요소가 화면의 가운데 중앙에 배치하도록 하며, 오른쪽 상단에 '닫기'버튼을 만들어서 닫을 수 있도록 한다.</p>
  <p>닫기 버튼 옆에 체크박스를 만들고 '오늘 하루 열지 않음'을 작성 사용자가 체크박스에 체크시 '닫기'를 누르면 제이쿼리 쿠키를 활용하여 브라우저에서 쿠키(cookie)파일을 생성하여 24시간내에 모달윈도가 열리지 않도록 구현함.</p>
</body>
</html>